<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculadora de viabilidade - Loja F√≠sica</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState } = React;

        const InputField = React.memo(({ label, value, onChange, prefix = "R$", suffix = "", info = "" }) => (
          <div className="mb-4">
            <label className="block text-sm font-semibold text-gray-700 mb-1">
              {label}
              {info && (
                <span className="ml-1 text-xs text-gray-500 font-normal">({info})</span>
              )}
            </label>
            <div className="relative">
              {prefix && (
                <span className="absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-500">
                  {prefix}
                </span>
              )}
              <input
                type="number"
                step="0.01"
                value={value}
                onChange={(e) => onChange(parseFloat(e.target.value) || 0)}
                className="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                style={{ paddingLeft: prefix ? '2.5rem' : '0.75rem', paddingRight: suffix ? '2.5rem' : '0.75rem' }}
              />
              {suffix && (
                <span className="absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500">
                  {suffix}
                </span>
              )}
            </div>
          </div>
        ));

        function PaybackCalculator() {
          const [despesaFixa, setDespesaFixa] = useState(17425);
          const [margemBruta, setMargemBruta] = useState(60);
          const [impostoFaturamento, setImpostoFaturamento] = useState(5);
          const [custoIntermediacao, setCustoIntermediacao] = useState(2);
          const [investimentoReforma, setInvestimentoReforma] = useState(88200);
          const [investimentoEstoque, setInvestimentoEstoque] = useState(60000);
          const [capitalGiro, setCapitalGiro] = useState(50000);
          const [pedidosPorDia, setPedidosPorDia] = useState(25);
          const [ticketMedio, setTicketMedio] = useState(100);
          const [custoCapital, setCustoCapital] = useState(1.0);

          const faturamentoEstimado = pedidosPorDia * ticketMedio * 30;
          const investimentoTotal = investimentoReforma + investimentoEstoque + capitalGiro;
          
          const receitaBruta = faturamentoEstimado;
          const custoMercadoria = faturamentoEstimado * (1 - margemBruta / 100);
          const lucroBruto = receitaBruta - custoMercadoria;
          
          const impostos = faturamentoEstimado * (impostoFaturamento / 100);
          const intermediacao = faturamentoEstimado * (custoIntermediacao / 100);
          const custoOportunidade = investimentoTotal * (custoCapital / 100);
          
          const despesasTotais = despesaFixa + impostos + intermediacao + custoOportunidade;
          const custoTotal = despesasTotais + custoMercadoria
          const lucroLiquido = lucroBruto - despesasTotais;
          
          const paybackMeses = lucroLiquido > 0 ? investimentoTotal / lucroLiquido : Infinity;
          const paybackAnos = paybackMeses / 12;
          const roi = lucroLiquido > 0 ? ((lucroLiquido * 12) / investimentoTotal) * 100 : -100;

          const despesasFixasTotal = despesaFixa + custoOportunidade;
          const margemContribuicao = (margemBruta / 100) - (impostoFaturamento / 100) - (custoIntermediacao / 100);
          const pontoEquilibrio = margemContribuicao > 0 ? despesasFixasTotal / margemContribuicao : 0;
          
          const cmvMensal = custoMercadoria;
          const sugestaoCapitalGiro = cmvMensal + despesaFixa;
          const margemCusto = (1 - margemBruta / 100);
          const sugestaoEstoque = 2 * faturamentoEstimado * margemCusto;

          const formatCurrency = (value) => {
            return new Intl.NumberFormat('pt-BR', {
              style: 'currency',
              currency: 'BRL'
            }).format(value);
          };

          return (
            <div className="min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 p-6">
              <div className="max-w-6xl mx-auto">
                <div className="bg-white rounded-2xl shadow-xl p-8 mb-6">
                  <h1 className="text-3xl font-bold text-gray-800 mb-2 flex items-center gap-3">
                    <span className="text-4xl">üìà</span>
                    Calculadora de Viabilidade - Loja F√≠sica
                  </h1>
                  <p className="text-gray-600 mb-6">
                    Simule diferentes cen√°rios alterando os valores abaixo
                  </p>

                  <div className="grid md:grid-cols-3 gap-6">
                    <div className="bg-blue-50 rounded-xl p-6">
                      <h2 className="text-xl font-bold text-blue-900 mb-4 flex items-center gap-2">
                        <span className="text-2xl">üí∞</span>
                        Investimentos Iniciais
                      </h2>
                      
                      <InputField
                        label="Investimento em Reforma"
                        value={investimentoReforma}
                        onChange={setInvestimentoReforma}
                        info="n√£o recuper√°vel"
                      />
                      
                      <InputField
                        label="Investimento em Estoque"
                        value={investimentoEstoque}
                        onChange={setInvestimentoEstoque}
                        info="recuper√°vel"
                      />
                      
                      <div className="bg-blue-100 rounded-lg p-3 mb-4 border border-blue-300">
                        <div className="text-sm font-semibold text-blue-900 mb-1">üí° Sugest√£o de Estoque:</div>
                        <div className="text-sm font-bold text-blue-900">{formatCurrency(sugestaoEstoque)}</div>
                        <div className="text-xs text-blue-700 mt-1">
                          2 √ó CMV mensal
                        </div>
                        <div className="text-xs text-blue-700">
                          2 √ó {formatCurrency(cmvMensal)}
                        </div>
                      </div>
                      
                      <InputField
                        label="Capital de Giro"
                        value={capitalGiro}
                        onChange={setCapitalGiro}
                        info="reserva operacional"
                      />
                      
                      <div className="bg-blue-100 rounded-lg p-3 mb-4 border border-blue-300">
                        <div className="text-sm font-semibold text-blue-900 mb-1">üí° Sugest√£o de Capital de Giro:</div>
                        <div className="text-sm font-bold text-blue-900">{formatCurrency(sugestaoCapitalGiro)}</div>
                        <div className="text-xs text-blue-700 mt-1">
                          CMV Mensal + Despesas Fixas
                        </div>
                        <div className="text-xs text-blue-700">
                          {formatCurrency(cmvMensal)} + {formatCurrency(despesaFixa)}
                        </div>
                      </div>
                      
                      <div className="mt-4 pt-4 border-t-2 border-blue-200">
                        <div className="text-lg font-bold text-blue-900">
                          Investimento Total: {formatCurrency(investimentoTotal)}
                        </div>
                      </div>
                    </div>

                    <div className="bg-green-50 rounded-xl p-6 border-2 border-green-200">
                      <h2 className="text-xl font-bold text-green-900 mb-4">
                        üí∞ Lucro bruto mensal
                      </h2>
                      
                      <InputField
                        label="Pedidos por Dia"
                        value={pedidosPorDia}
                        onChange={setPedidosPorDia}
                        prefix=""
                        suffix="pedidos"
                      />
                      
                      <InputField
                        label="Ticket M√©dio"
                        value={ticketMedio}
                        onChange={setTicketMedio}
                      />
                      
                      <InputField
                          label="Margem de lucro bruta"
                          info="100 x (Receita Total - Custo dos Produtos Vendidos) / Receita Total"
                          value={margemBruta}
                          onChange={setMargemBruta}
                          prefix=""
                          suffix="%"
                        />
                        <div className="my-4 py-4 border-t-2 border-green-300">
                        <div className="text-lg font-bold text-green-900">
                          Lucro bruto mensal: {formatCurrency(lucroBruto)}
                        </div>
                        <div className="text-sm text-green-700 mt-1">
                          {pedidosPorDia} pedidos √ó {formatCurrency(ticketMedio)} √ó 30 dias x {margemBruta}%
                        </div>
                      </div>
                    </div>

                    

                    <div className="bg-orange-50 rounded-xl p-6 border-2 border-orange-200">
                      <h2 className="text-xl font-bold text-orange-900 mb-4">
                        üìä Custos e Despesas
                      </h2>
                      
                      
                      <InputField
                        label="Despesa Mensal Fixa"
                        value={despesaFixa}
                        onChange={setDespesaFixa}
                        info="aluguel, sal√°rios, etc"
                      />
                      
                      <InputField
                        label="Imposto sobre Faturamento"
                        value={impostoFaturamento}
                        onChange={setImpostoFaturamento}
                        prefix=""
                        suffix="%"
                      />
                      
                      <InputField
                        label="Custo de Intermedia√ß√£o"
                        value={custoIntermediacao}
                        onChange={setCustoIntermediacao}
                        prefix=""
                        suffix="%"
                        info="taxas de cart√£o, etc"
                      />
                      
                      <InputField
                        label="Custo Mensal do Capital"
                        value={custoCapital}
                        onChange={setCustoCapital}
                        prefix=""
                        suffix="%"
                        info="custo de oportunidade ou do financiamento"
                      />
                      
                      <div className="mt-4 pt-4 border-t-2 border-orange-300">
                        <div className="text-lg font-bold text-orange-900">
                          Custo Total Mensal: {formatCurrency(custoTotal)}
                        </div>
                        <div className="text-sm text-orange-700 mt-1">
                          Despesas fixas + impostos + intermedia√ß√£o + custo de capital + custo do produto
                        </div>
                      </div>
                    </div>
                  </div>
                </div>

                <div className="bg-white rounded-2xl shadow-xl p-8 mb-6">
                  <h2 className="text-2xl font-bold text-gray-800 mb-6">
                    Demonstrativo de Resultados Mensal
                  </h2>
                  
                  <div className="space-y-3">
                    <div className="flex justify-between items-center py-2 border-b">
                      <span className="text-gray-700 font-semibold">Receita Bruta</span>
                      <span className="text-gray-900 font-bold">{formatCurrency(receitaBruta)}</span>
                    </div>
                    
                    <div className="flex justify-between items-center py-2 border-b">
                      <span className="text-gray-700">(-) Custo da Mercadoria</span>
                      <span className="text-red-600">({formatCurrency(custoMercadoria)})</span>
                    </div>
                    
                    <div className="flex justify-between items-center py-2 border-b bg-green-50">
                      <span className="text-gray-700 font-semibold">= Lucro Bruto</span>
                      <span className="text-green-700 font-bold">{formatCurrency(lucroBruto)}</span>
                    </div>
                    
                    <div className="flex justify-between items-center py-2 border-b">
                      <span className="text-gray-700">(-) Despesas Fixas</span>
                      <span className="text-red-600">({formatCurrency(despesaFixa)})</span>
                    </div>
                    
                    <div className="flex justify-between items-center py-2 border-b">
                      <span className="text-gray-700">(-) Impostos ({impostoFaturamento}%)</span>
                      <span className="text-red-600">({formatCurrency(impostos)})</span>
                    </div>
                    
                    <div className="flex justify-between items-center py-2 border-b">
                      <span className="text-gray-700">(-) Intermedia√ß√£o ({custoIntermediacao}%)</span>
                      <span className="text-red-600">({formatCurrency(intermediacao)})</span>
                    </div>
                    
                    <div className="flex justify-between items-center py-2 border-b">
                      <span className="text-gray-700">(-) Custo de Oportunidade ({custoCapital}%)</span>
                      <span className="text-red-600">({formatCurrency(custoOportunidade)})</span>
                    </div>
                    
                    <div className="flex justify-between items-center py-3 border-t-2 border-gray-300 bg-blue-50 mt-4">
                      <span className="text-gray-900 font-bold text-lg">= Lucro L√≠quido Mensal</span>
                      <span className={`font-bold text-lg ${lucroLiquido >= 0 ? 'text-green-600' : 'text-red-600'}`}>
                        {formatCurrency(lucroLiquido)}
                      </span>
                    </div>
                  </div>
                </div>

                <div className="grid md:grid-cols-4 gap-6 mb-6">
                  <div className="bg-gradient-to-br from-purple-500 to-purple-700 rounded-2xl shadow-xl p-6 text-white">
                    <div className="flex items-center gap-3 mb-3">
                      <span className="text-3xl">‚è±Ô∏è</span>
                      <h3 className="text-lg font-semibold">Tempo de Retorno</h3>
                    </div>
                    <div className="text-4xl font-bold mb-2">
                      {paybackMeses === Infinity ? '‚àû' : paybackMeses.toFixed(1)}
                    </div>
                    <div className="text-purple-100">
                      {paybackMeses === Infinity ? 'N√£o h√° retorno' : `meses (${paybackAnos.toFixed(1)} anos)`}
                    </div>
                  </div>

                  <div className="bg-gradient-to-br from-green-500 to-green-700 rounded-2xl shadow-xl p-6 text-white">
                    <div className="flex items-center gap-3 mb-3">
                      <span className="text-3xl">üìà</span>
                      <h3 className="text-lg font-semibold">ROI Anual</h3>
                    </div>
                    <div className="text-4xl font-bold mb-2">
                      {roi === -100 ? '-' : roi.toFixed(1)}%
                    </div>
                    <div className="text-green-100">
                      Retorno sobre investimento
                    </div>
                  </div>

                  <div className="bg-gradient-to-br from-blue-500 to-blue-700 rounded-2xl shadow-xl p-6 text-white">
                    <div className="flex items-center gap-3 mb-3">
                      <span className="text-3xl">üíµ</span>
                      <h3 className="text-lg font-semibold">Lucro Anual</h3>
                    </div>
                    <div className="text-3xl font-bold mb-2">
                      {formatCurrency(lucroLiquido * 12)}
                    </div>
                    <div className="text-blue-100">
                      Proje√ß√£o de 12 meses
                    </div>
                  </div>

                  <div className="bg-gradient-to-br from-amber-500 to-amber-700 rounded-2xl shadow-xl p-6 text-white">
                    <div className="flex items-center gap-3 mb-3">
                      <span className="text-3xl">üéØ</span>
                      <h3 className="text-lg font-semibold">Ponto de Equil√≠brio</h3>
                    </div>
                    <div className="text-3xl font-bold mb-2">
                      {formatCurrency(pontoEquilibrio)}
                    </div>
                    <div className="text-amber-100">
                      Faturamento m√≠nimo/m√™s
                    </div>
                  </div>
                </div>

                {lucroLiquido <= 0 && (
                  <div className="mt-6 bg-red-50 border-l-4 border-red-500 rounded-lg p-4 flex items-start gap-3">
                    <span className="text-red-500 text-2xl">‚ö†Ô∏è</span>
                    <div>
                      <h4 className="font-bold text-red-800 mb-1">Aten√ß√£o: Opera√ß√£o com preju√≠zo!</h4>
                      <p className="text-red-700 text-sm">
                        O neg√≥cio est√° operando com preju√≠zo mensal. √â necess√°rio aumentar o faturamento, 
                        reduzir custos ou melhorar a margem para viabilizar o investimento.
                      </p>
                    </div>
                  </div>
                )}

                {lucroLiquido > 0 && paybackAnos > 5 && (
                  <div className="mt-6 bg-yellow-50 border-l-4 border-yellow-500 rounded-lg p-4 flex items-start gap-3">
                    <span className="text-yellow-600 text-2xl">‚ö†Ô∏è</span>
                    <div>
                      <h4 className="font-bold text-yellow-800 mb-1">Tempo de retorno elevado</h4>
                      <p className="text-yellow-700 text-sm">
                        O payback de {paybackAnos.toFixed(1)} anos √© considerado longo para varejo. 
                        Considere ajustar os par√¢metros para melhorar a viabilidade do investimento.
                      </p>
                    </div>
                  </div>
                )}

                {lucroLiquido > 0 && paybackAnos <= 3 && (
                  <div className="mt-6 bg-green-50 border-l-4 border-green-500 rounded-lg p-4 flex items-start gap-3">
                    <span className="text-green-600 text-2xl">‚úÖ</span>
                    <div>
                      <h4 className="font-bold text-green-800 mb-1">Investimento vi√°vel!</h4>
                      <p className="text-green-700 text-sm">
                        O payback de {paybackAnos.toFixed(1)} anos indica uma boa oportunidade de investimento.
                        O ROI anual de {roi.toFixed(1)}% √© atrativo para o varejo.
                      </p>
                    </div>
                  </div>
                )}
              </div>
            </div>
          );
        }

        ReactDOM.render(<PaybackCalculator />, document.getElementById('root'));
    </script>
</body>
</html>
